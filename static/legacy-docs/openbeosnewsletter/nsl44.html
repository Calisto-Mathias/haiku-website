
               <html>
                    <!-- Heading -->
                    <head>
                         <title>OpenBeOS Project - Displaying Newsletter</title>
                         <meta name="Keywords" content="OpenBeOS, BeOS, OBOS, operating system, developer">
                         <meta http-equiv="Cache-Control" content="no-cache">
                         <meta http-equiv="Pragma" content="no-cache">
                    </head>
                    <!-- / Heading -->
                    <!-- Body -->
                    <body bgcolor="#ffffff" leftmargin=5 topmargin=5>

                         <!-- Top Table -->
                         <table width="100%" cellspacing=0 cellpadding=0 border=0 bgcolor="#a7afbb">

                              <!-- Logo -->
                              <tr valign="bottom"><td><img src="images/logo.png" border=0></td></tr>
                              <!-- / Logo -->

                              <!-- Slogan -->
                              <tr valign="top">
                                   <td width="100%">
                                        <img src="images/spacer.gif" height=1 width=160><img src="images/slogan.png">
                                   </td>
                              </tr>
                              <!-- / Slogan -->

                              <tr><td colspan=2><img src="images/spacer.gif" height=6 width=1></td></tr>

                         </table>
                         <!-- / Top Table -->

                         <!-- Main Table -->
                         <table width="100%" cellspacing=0 cellpadding=0 border=0>
                              <tr valign="top">



                                   <td width=1 bgcolor="#dddddd"><img src="images/spacer.gif" height=1 width=1></td>
                                   <td width=16 bgcolor="#ffffff"><img src="images/spacer.gif" height=1 width=15>&nbsp;</td>

                                   <!-- Content -->
                                   <td width="100%">
                                        <font size="-1" face="Verdana, Arial">

     	    	<table width="99%" cellspacing=0 cellpadding=0 border=0>
           	     <tr>
                	     <td height="12"><a name="top">&nbsp;</a><img src="images/spacer.gif" heigh="12" width=1></td>
               	</tr>
               	<tr>
                         <td>
                    	     <img src="images/N.png" align="absmiddle" border=0>
                              <img src="images/spacer.gif" height=1 width=20>
                              <font face="Verdana, Arial" size="+2" color="#331111">Displaying Newsletter<div align="right"><font size="-1"><a href="index.html">Newsletter Archive</a></font></div></font>
                              <img src="images/spacer.gif" heigh=20 width=1>
                         </td>
               	</tr>
               	<font size="-1" face="Verdana, Arial">

               <tr>
                    <td><font color="#113355" face="Verdana,Arial"><b>Issue 44, 18 Jun 2003</b></font>

                    </td>
               </tr>
               <tr><td height="6"><img src="images/spacer.gif" height="6"></td></tr>
               <!-- Newsletter Header Links -->
               <tr>
                    <td bgcolor=#eeeeee>

                         <table width="100%" cellspacing="2" cellpadding="0" border="0">
                              <tr valign="top">
                                   <td bgcolor="#f6f6f6">
                                        <font face="verdana,arial" size="-1">
                                        <br><br>&nbsp;&nbsp;<b><font color="">In This Issue:</font></b>
                                        <ul type="square">
                                             <li><a href="#153">CVS digest for 15th of June 2003 </a>&nbsp; by Niels Sascha Reedijk</li><li><a href="#154">VM, File Caching and You</a>&nbsp; by Michael Phipps</li><li><a href="#155">Open Standards, BeOS and You</a>&nbsp; by Michael Phipps</li>
                                        </ul>
                                        </font>
                                   </td>
                              </tr>
                         </table>

                    </td>
               </tr>
               <!-- / Newsletter Header Links -->

		     <!-- Newsletter Article (ID:153) -->
               <tr>
                    <td height="30"><img src="images/spacer.gif" height="30" width="1"></td>
               </tr>
               <tr>
                    <td>
                         <a name="153">&nbsp;<br></a>

                         <table width="100%" cellspacing="0" cellpadding="0" border="0">
                              <tr><td bgcolor="#999999" colspan="2" height="2"><img src="images/spacer.gif" height="2"></td></tr>
                              <tr>
                                   <td height="32" width="80%">
                                        <b><font face="verdana,arial" color="#331111">CVS digest for 15th of June 2003 </font></b>
                                   </td>
                                   <td align="right"><font size="-1">by <a href="mailto:n.reedijk@planet.nl ">Niels Sascha Reedijk</a></font>&nbsp;</td>
                              </tr>
                              <tr><td bgcolor="#999999" colspan="2" height="3"><img src="images/spacer.gif" height="3"></td></tr>
                              <tr><td colspan="2" height="15"><img src="images/spacer.gif" height="15"></td></tr>
                         </table>

                    </td>
               </tr>
               <tr>
                    <td>
                         <font size="-1" face="verdana,arial">
                         <style type="text/css">blockquote {font-family:Courier New;color:red;font-size:10pt;}</style>
<p>Howdy. This is the first issue of the OpenBeOS CVS digest. The idea of having a digest of all the CVS commits done in a certain period of time comes from
<a href="mailto:dkite@shaw.ca">Derek Kite</a>, who has done a similar thing for the <a href="http://members.shaw.ca/dkite/index.html">KDE CVS.
</a> However, the arrangement and the style of this digest is somewhat different from the one of Derek Kite.</p>

<p>This CVS digest contains a selection of commits from the sixth of June onward (just after the release of the Media Kit alpha 1). Please note that there are more things done to the CVS repository. If you would like a better overview of the changes in the repository, please look at the
<a href="http://sourceforge.net/mailarchive/forum.php?forum_id=7704">archives</a> of the OpenBeOS-CVS list, or <a href="http://lists.sourceforge.net/mailman/listinfo/open-beos-cvs">subscribe
</a>. Now, let&#039s get on with the changes.</p>

<h3>Screen Preflet</h3>

<p>On the 6th of June, Stefano Ceccherini committed, by means of Marc Flerackers, a major change to the Screen Preflet:</p>

<blockquote>
Modified Files:<blockquote>AlertView.cpp AlertView.h AlertWindow.cpp AlertWindow.h Constants.h RefreshSlider.cpp RefreshSlider.h RefreshView.cpp RefreshView.h RefreshWindow.cpp Screen.cpp Screen.rsrc ScreenApplication.h ScreenDrawView.cpp ScreenDrawView.h ScreenSettings.h ScreenView.cpp ScreenView.h ScreenWindow.cpp ScreenWindow.h Utility.cpp Utility.h
</blockquote>
Log Message:<blockquote>Check-in for Stefano Ceccherini: cleanup the code a bit, removed the hardcode color</blockquote>
</blockquote>

<p>But on the ninth of June, Stefano found out he had forgotten something, and he added:</p>

<blockquote>
Modified Files:<blockquote>ScreenDrawView.cpp ScreenDrawView.h ScreenWindow.cpp ScreenWindow.h</blockquote>
Log Message:<blockquote>When you changed the refresh rate for all workspaces, then selected "cancel" the changes didn&#039t revert... Fixed. Some more cleanups. Some code (not compiled right now, it works partially) to change the way the example screen is rendered (bitmaps instead of drawing)
</blockquote>
</blockquote>

<p>Check the <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/prefs/screen/#dirlist">source</a> of the Screen Preflet to see the result of these commits and some other changes!
</p>

<h3>Media Kit Alpha 1 and onward</h3>

<p>Jérôme Duval committed a change to the SoundPlayer class, which allows applications to change the volume now. On the sixth of June, the following happened:
</p>

<blockquote>
Modified Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/kits/media/SoundPlayer.cpp.diff?r1=1.7&r2=1.9">SoundPlayer.cpp
</a></blockquote>
Log Message:<blockquote>ok the right file this time ... *Volume* methods implemented; tested with SoundPlayerTest.cpp; only valid when connected with R5 AudioMixer
</blockquote>
</blockquote>

<p>As promised by Marcus Overhagen, the new mixer for the Media Kit alpha 2 was already worked on. On the sixth of June he committed this:
</p>

<blockquote>
Modified Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/Jamfile.diff?r1=1.3&r2=1.4">Jamfile
</a></blockquote>
Added Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/MixerCore.cpp">MixerCore.cpp
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/MixerCore.h">MixerCore.h
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/MixerInput.cpp">MixerInput.cpp
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/MixerInput.h">MixerInput.h
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/MixerOutput.cpp">MixerOutput.cpp
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/media/media-add-ons/mixer/MixerOutput.h">MixerOutput.h
</a></blockquote>
Log Message:<blockquote>added new mixer components</blockquote>
</blockquote>

<p>On the tenth of June, Axel Dörfler, who seems to be involved with literally every part of the codebase, committed a change to the ParameterWeb class of the media kit:
</p>

<blockquote>
Modified Files:<blockquote>ParameterWeb.cpp</blockquote>
Log Message:<blockquote>Work in progress of the BParameterWeb rework; almost every line has been changed, sorry. Fixed many bugs in the old implementation, this one is now also endian-aware, is faster on many things, works with stampTV, ... Cleaned up a lot, most of it now complies with our style guide. Added a bunch of helper functions that makes the code much better (to read), and easier to maintain. It&#039s not yet completed though - will do that soon. Also still missing is any documentation about those classes - I will also work on this. The changes have two downsides, though:
<ul><li>I broke compatibility with the R5 flattened format. It shouldn&#039t be a big issue, since it was never thought to be put on disk - I will look into that, though.
<li>the previous implementation had a strange policy when the Unflatten() methods had reason to fail - it tried to read as much as possible instead of just failing and leaving an invalid object behind. The new implementation will just fail - the object you called Unflatten() from might not contain useful information after this, though.
</ul></blockquote>
</blockquote>

<p>If you are wondering, like me, what this ParameterWeb does, check out the following answer Axel gave me when I asked him:</p>

<blockquote>It contains all the parameters that a controllable node exposes - all gui you see from any media stuff is based on that data.
</blockquote>

<p>And Marcus Overhagen added that it seems to work now!</p>

<p>The same Marcus Overhagen, on the eleventh of June, continued work on the mixer. All in all a great amount of work is done on this very important kit. So the media kit is also progressing nicely.
</p>

<h3>Disk Device Manager</h3>

<p>Ingo Weinhold on the ninth of June:</p>

<blockquote>
Added Files:<blockquote>KDiskDevice.h KDiskDeviceJob.h KDiskDeviceJobFactory.h KDiskDeviceJobQueue.h KDiskDeviceManager.h KDiskSystem.h KFileSystem.h KPartition.h KPartitioningSystem.h ddm_modules.h ddm_userland_interface.h disk_device_manager.h
</blockquote>
Log Message:<blockquote>Headers for the disk device manager. Very early state.</blockquote>
</blockquote>

<p>And he continued that same day with:</p>

<blockquote>
Added Files:<blockquote>List.h KDiskDevice.cpp KDiskDeviceJob.cpp KDiskDeviceJobFactory.cpp KDiskDeviceJobQueue.cpp KDiskDeviceManager.cpp KDiskSystem.cpp KFileSystem.cpp KPartition.cpp KPartitioningSystem.cpp disk_device_manager.cpp Jamfile
</blockquote>
Log Message:<blockquote>Mostly empty implementations for the disk device manager classes. Save KPartition which is partially done.</blockquote>
</blockquote>

<p>He continued his line of empty implementations with:</p>

<blockquote>
Added Files:<blockquote>KCreateChildJob.h KDefragmentJob.h KDeleteChildJob.h KInitializeJob.h KMoveJob.h KRepairJob.h KResizeJob.h KScanPartitionJob.h KSetParametersJob.h KCreateChildJob.cpp KDefragmentJob.cpp KDeleteChildJob.cpp KInitializeJob.cpp KMoveJob.cpp KRepairJob.cpp KResizeJob.cpp KScanPartitionJob.cpp KSetParametersJob.cpp
</blockquote>
Log Message:<blockquote>Mostly empty implementations for the disk device manager classes. Save KPartition which is partially done.</blockquote>
</blockquote>

<p>Slowly but surely the empty implementations are replaced with bits of working code. For example on the tenth of June with:</p>

<blockquote>
Modified Files:<blockquote>KDiskDeviceManager.cpp</blockquote>
Log Message:<blockquote>Implemented some basics of KDiskDeviceManager.</blockquote>
</blockquote>

<p>On the thirteenth of June, another milestone was reached with the porting of the Intel partition type, to the new kernel module:</p>

<blockquote>
Added Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/partitioning_systems/intel/Jamfile">Jamfile
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/partitioning_systems/intel/PartitionMap.cpp">PartitionMap.cpp
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/partitioning_systems/intel/PartitionMap.h">PartitionMap.h
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/partitioning_systems/intel/intel.cpp">intel.cpp
</a></blockquote>
Log Message:<blockquote>Ported the intel partitioning system module to the new interfac (disk device manager) and moved it to a nicer place. First tests look good, though my hard disk structure doesn&#039t even have extended partitions. Going to install Linux now...
</blockquote>
</blockquote>

<p>Slowly but surely the empty implementations are replaced with some real code. Are you wondering what the use of this code is? The Disk Device API is a way for the programmers to find out which logical volumes are present on the system. Ingo Weinhold first wanted to implement this in user space, but apparently he has chosen the kernel space after all. If you want to check out the current progress, visit the
<a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/kernel/core/disk_device_manager/#dirlist">source</a> and the
<a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/headers/private/kernel/disk_device_manager/#dirlist">headers
</a> in the webcvs.</p>

<h3>Bits&#039n&#039Pieces</h3>

<p>On the eight of June, Jack Burton by means of Axel Dörfler, committed some cleanups:</p>

<blockquote>
Modified Files:<blockquote><a href="%20http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/drivers/common/digit.c.diff?r1=1.2&r2=1.3">digit.c
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/drivers/common/null.c.diff?r1=1.4&r2=1.5">null.c
</a> <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/drivers/common/zero.c.diff?r1=1.4&r2=1.5">zero.c
</a></blockquote>
Log Message:<blockquote>Some cleanups, courtesy of Jack Burton.</blockquote>
</blockquote>

<p>On the eleventh of June, Bill Hayden had an enlightenment and did some work on the statusbar:</p>

<blockquote>
Modified Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/kits/interface/StatusBar.cpp.diff?r1=1.6&r2=1.7">StatusBar.cpp
</a></blockquote>
Log Message:<blockquote>Conform more tightly with the BeBook, and fix a few crashing bugs in the process</blockquote>
</blockquote>

<p>Darkwyrm added, on that same day, the following to CVS:</p>

<blockquote>
Log Message:<blockquote>Added <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/apps/bin/rcs/#dirlist">rcs
</a>, <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/apps/bin/gzip/#dirlist">gzip</a>, <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/apps/bin/sed/#dirlist">sed
</a>, and associated utilities.</blockquote>
</blockquote>

<p>Andrew Bachman, following the release of <a href="http://www.bebits.com/app/2712">Pulse</a> 1.06, added some CPU types on the thirteenth of June:
</p>

<blockquote>
Modified Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/headers/os/kernel/OS.h.diff?r1=1.19&r2=1.23">OS.h
</a></blockquote>
Log Message:<blockquote>okay, last commit for today :-P ... protected non-R5 cpu types with #define OBOS_CPU_TYPES and #ifdef OBOS_CPU_TYPES
</blockquote>
</blockquote>

<p>That same day, Niels Reedijk (hey, that&#039s me!), by means of Philippe Houdoin, committed a new (experimental!) Realtek 8193 driver to the CVS:
</p>

<blockquote>
Added Files:<blockquote>Jamfile TODO driver.c ether_driver.h packetlist.c packetlist.h util.c util.h</blockquote>
Log Message:<blockquote>Import, on behalf of Niels Reedijk (SF ID: nielx), his RTL8139 network cards driver. Add a Jamfile to build it (thanks to Axel&#039s sis900 jamfile).
</blockquote>
</blockquote>

<p>A minor note: the driver drops half the packets at the moment. If you want to try the <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/add-ons/kernel/drivers/network/rtl8139/#dirlist">source
</a>, please <a href="mailto:n.reedijk@planet.nl">mail me</a> personally to also get the source of the net_server add-on.</p>

<p>On the fifteenth of June Axel Dörfler committed an update to the driver_settings module in the kernel with the following message:
</p>

<blockquote>
Added Files:<blockquote><a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/open-beos/current/src/kernel/libroot/os/driver_settings.c">driver_settings.c
</a></blockquote>
Log Message:<blockquote>This replaces kernel/core/driver_settings.c - its functionality will now be available to userland applications as well. Furthermore, the API & grammar has been extended. There is now a &#039=&#039 allowed between the key and its values. Also, &#039\n&#039 can now be replaced with &#039&#039. These changes allow flat driver_settings strings. It doesn&#039t work perfectly right now, but it&#039s a start. A test application will be added soon, the kernel file will be removed soon as well, and the build updated.
</blockquote>
</blockquote>
                         </font>
                    </td>
               </tr>
               <!-- / Newsletter Article -->
		     <!-- Newsletter Article (ID:154) -->
               <tr>
                    <td height="30"><img src="images/spacer.gif" height="30" width="1"></td>
               </tr>
               <tr>
                    <td>
                         <a name="154">&nbsp;<br></a>

                         <table width="100%" cellspacing="0" cellpadding="0" border="0">
                              <tr><td bgcolor="#999999" colspan="2" height="2"><img src="images/spacer.gif" height="2"></td></tr>
                              <tr>
                                   <td height="32" width="80%">
                                        <b><font face="verdana,arial" color="#331111">VM, File Caching and You</font></b>
                                   </td>
                                   <td align="right"><font size="-1">by <a href="mailto:michaelphipps@users.sourceforge.net">Michael Phipps</a></font>&nbsp;</td>
                              </tr>
                              <tr><td bgcolor="#999999" colspan="2" height="3"><img src="images/spacer.gif" height="3"></td></tr>
                              <tr><td colspan="2" height="15"><img src="images/spacer.gif" height="15"></td></tr>
                         </table>

                    </td>
               </tr>
               <tr>
                    <td>
                         <font size="-1" face="verdana,arial">
                         <p>Axel recently asked me about what sort of a plan I had for file caching. I realized that I couldn&#039t easily explain it without explaining a significant portion of VM2 design, so I started to write this up. As I did so, I realized that others may be interested. So, without further ado, here we go...
</p>

<p>Be&#039s file caching is pretty simple, by all reports. On startup, the file system looks to see how much ram your machine has. It then allocates a portion of that for file system cache--about 1/8
<sup>th</sup> (as per <u>Practical File System Design</u>, page 135).  The disk block cache, if isolated from the VM system, is simpler in many regards. You keep a list of blocks that you have in the cache and pick some replacement algorithm (often times least recently used, or LRU). When a user requests a block, you check to see if you have it. If so, you update the block&#039s reference date/time and return the block. If not, you pick the least recently used block, set its date/time to now, load the requested block into it, and return the block. <a href="images/0618illustration1.png"> See illustration 1</a>. There are still some interesting pieces around journaling and read-ahead, though.
</p>

<p>There are a few problems with this. One is that the amount of memory is fixed. The cache cannot grow or shrink as the system needs other memory. OK, well, we could fix this by adding a
<code>shrink</code> function and put a hook into the VM system that calls <code>shrink</code> when memory gets low. Maybe this <code>shrink
</code> would have a date/time--everything not referenced since that date/time would go away. Why, you may ask? Because it meshes well with most VM swapping routines--they check the "accessed" bit, which was cleared at some point in the past, and they clean out anything that has not been touched since then. Maybe you could even include a "desperation" level--maybe it doesn&#039t make sense to get rid of *everything* prior to that date, if the system just barely needs more memory.
</p>

<p>Another problem with this methodology is that it doesn&#039t play well with <code>mmap</code>, which is why Be didn&#039t implement <code>mmap
</code>, I believe. Let&#039s take an example. You <code>mmap</code> some file (process A) which consists of 2 disk blocks of data. The VM system marks some address range as being "backed" by that file. You then read the first byte. The VM system faults (since that memory isn&#039t really there). The VM system realizes that it needs to read that file. It calls the FS, which reads the block into the cache. It then returns that address to the VM system. Now, the VM system doesn&#039t "own" the FS cache, so the VM has to allocate another page, copy the data from the FS cache to the VM-owned space. It then returns the new space to the calling process. But that data is in the system twice! <a href="images/0618illustration2.png">See illustration 2</a>.
</p>

<p>Furthermore, let&#039s say that some heavy disk activity occurs and that cache block is released. Now some other process (process B)
<code>mmap</code>s that block. It is read in again, despite already existing in memory. This makes 3 copies in memory! <a href="images/0618illustration3.png"> See illustration 3</a>.</p>

<p>This is a wasted effort. To make the situation worse, process A writes to the block. Process B then reads the same byte. Unless the VM tracks all of the mappings, they don&#039t know about each other. There is a bad race condition for applications which can be compounded by multiple apps reading/writing/
<code>mmap</code>ing the same file. <a href="images/0618illustration4.png"> See illustration 4</a>.</p> One sidenote is the <code>mmap</code> has a parameter that allows you to avoid sharing of buffers between processes.

<p>So, what do we do? My assertion is to let the VM do caching <i>and</i> virtual memory--this is similar to many other OSs out there. The concept is simple: Read and write work through the VM system. So when a
<code>read()</code> system call occurs, <code>vm_read</code> is called. The VM keeps track of every disk block that either is in memory or is virtual (i.e., mapped but not present). When
<code>vm_read</code> is called, the VM looks through the disk blocks. If it is not found, it is mapped into the cache&#039s address space (which is part of kernel space, so it is limited to somewhere less than 2 GB). The VM then looks to see if the page is present. If so, it copies the data into the userland buffer (unavoidable, with the POSIX API) and returns. If the data is not present, it is handled in the same way as if the page was paged out. Right now, that is to load the page into an empty block of memory. Eventually, that will be to put this process on hold and notify the paging daemon that the block is needed. Write() works in a very similar way. An example is in <a href="images/0618illustration5.png"> illustration 5</a>.
</p>

<p>Eventually, though, these structures get full. Either the cache address-space gets full, or physical memory is expended. Cache space can be managed in many different ways. This is a classic replacement algorithm tradeoff--we can exchange processing time, memory and code complexity for some level of improvement of cache efficiency. This needs to be researched and explored in more detail. The other case is the more common one on all systems--physical memory is (nearly) all in use and some needs to be freed. My theory is that the VM system will iterate over the disk blocks that it knows about. Each disk block knows what virtual memory is mapped to it (a rough measure of how many processes could be effected by its being swapped out), how many of those mappings have been accessed since the last purging (a rough measure of how busy this block is), and whether or not the block has been written to (a rough measure of the cost of discarding it). It will produce a statistic from these on the "value" of that block to the system, then compare that value to the "desperation" of the system for memory. It will then decide whether to flush that memory or not.
</p>
                         </font>
                    </td>
               </tr>
               <!-- / Newsletter Article -->
		     <!-- Newsletter Article (ID:155) -->
               <tr>
                    <td height="30"><img src="images/spacer.gif" height="30" width="1"></td>
               </tr>
               <tr>
                    <td>
                         <a name="155">&nbsp;<br></a>

                         <table width="100%" cellspacing="0" cellpadding="0" border="0">
                              <tr><td bgcolor="#999999" colspan="2" height="2"><img src="images/spacer.gif" height="2"></td></tr>
                              <tr>
                                   <td height="32" width="80%">
                                        <b><font face="verdana,arial" color="#331111">Open Standards, BeOS and You</font></b>
                                   </td>
                                   <td align="right"><font size="-1">by <a href="mailto:michaelphipps@users.sourceforge.net">Michael Phipps</a></font>&nbsp;</td>
                              </tr>
                              <tr><td bgcolor="#999999" colspan="2" height="3"><img src="images/spacer.gif" height="3"></td></tr>
                              <tr><td colspan="2" height="15"><img src="images/spacer.gif" height="15"></td></tr>
                         </table>

                    </td>
               </tr>
               <tr>
                    <td>
                         <font size="-1" face="verdana,arial">
                         It seems to me that <a href="http://everything2.com/index.pl?node_id=666598&displaytype=printable">Metcalfe&#039s Law</a> applies to file formats as much as it does to networks. Look at PDF as an example. It is a relatively new format, doesn&#039t have the advantage of being supported out of the box by most OS&#039s and fills a niche that is pretty small. The biggest reason that PDF has succeeded is that the reader is available for any system. Smaller file sizes and bookmarks are nice features, but really the key is that PDF was seen as a way to publish documents to the Web.
<P>
I was browsing Slashdot recently and one of the comments contained a link to <a href="http://www.openswf.org">openswf.org</a> - an organization that holds the Shock Wave Flash standard. What? That is an open standard? I didn&#039t know that. I starting thinking about the number of open standards that exist out there and about how lucky we (OpenBeOS) are.
<P>
It would be easy to complain about the non-open standards. Yes, .DOC, .XLS, .MDB, .PPT and a few others are out there and the open source community misses their presence a great deal. That aside, for a moment, the majority of data either can be or is, by default, saved to an open format. Bitmap formats are all open. I believe that most of the vector formats (Lightwave, Autocad and SVG) are open. Sound formats are all open, excepting the MP3 encoders. Many video formats are open, notable exceptions being Windows Media Format and some codecs for QuickTime. All of the OGG formats are open. RTF is an open format, something else that surprised me.
<P>
Rather than complaining about what is missing, though, I think that it would be more beneficial to adopt and praise the open standards. If open source projects don&#039t support open standards, who will? Our apps need to go above and beyond commercial apps in our support of open standards. Make your RTF import/export perfect. Read and write every open format that you can get your hands on. Support those who open their design and ignore those who don&#039t. Most of the time there is a way, albeit sometimes less than perfect, that every two applications can talk with each other.
<P>
BeOS has the Translation Kit, of course, to make loading images and text easier. The Media Kit handles sounds and video. Mike Wilber and I have talked (vaguely) about enhancing Translation Kit after R1 to make the Text format better, as well as incorporating Vector Graphics. Another format type for us to support is 3D vector formats.
<P>
Realistically, there is little standing between us (BeOS users) and the ability to read and write a lot more file formats. Some of them may be more useful than others, but Translators take little hard drive space and even less memory (when not in use). Translators are pretty easy to write, really, other than the complexity imposed by the file format itself. There are a lot of documents and file format help available on <a href="http://www.wotsit.org">wotsit.org</a>. Sure, there are tons of formats that are pretty obsolete or that we don&#039t have established ways to convert. But there are plenty that we do, too. I looked at my translator directory - there are about 6 graphics and 1 text formats shipped with BeOS. I think that we can do a lot better than this.
<P>
Many of the same arguements apply to drivers. While there are a few drivers that will require work from the OBOS kernel team (USB, PCI, etc), the majority of drivers are waiting on one of three things: specs, a driver writer or the developer having the hardware. Take a look at: <a href="http://bedrivers.com/mostwanted.html"> BeDrivers Most Wanted </a> page. Lots of work that can be done there, too.
<P>
Since I have discussed all of the work that needs to be done, I need to give proper credit to those who have done or are doing the work. Marcus, Thomas, Bruno, Scott, Mike and all of the others, thank you. A great OS without drivers is a project for academia. Without you, BeOS would be dead, as would OpenBeOS.
                         </font>
                    </td>
               </tr>
               <!-- / Newsletter Article -->
               	</font>
               	<tr><td><img src="images/spacer.gif" width=1 height=20></td></tr>
          	</table>
                                        </font>
                                   </td>
                                   <!-- / Content -->

                                   <td width=20 bgcolor="#ffffff"><img src="images/spacer.gif" height=1 width=20>&nbsp;</td>
                                   <td width=1 bgcolor="#fcfcfc"><img src="images/spacer.gif" height=1 width=10>&nbsp;</td>



                                   <td width=10 bgcolor="#fcfcfc"><img src="images/spacer.gif" height=1 width=10>&nbsp;</td>
                                   <td width=1 bgcolor="#dddddd"><img src="images/spacer.gif" height=1 width=1></td>

                              </tr>
                              <tr><td colspan=9 height=1 bgcolor="#dddddd"><img src="images/spacer.gif" height=1 width=1></td></tr>
                         </table>
                         <!-- / Main Table -->



                    </body>
                    <!-- / Body -->
                    </html>